{% load static %}

<header id="header" class="fixed-top shadow mb-2 bg-body rounded">
  {% with request.resolver_match.url_name as url_name %}
  
  <div class="container-fluid">
    <nav class="navbar navbar-expand-lg navbar-light">
      
      <a class="navbar-brand" href="{% url 'index' %}">Rashidat Adekoya | Portfolio</a>
      
      <!-- Toggler for mobile -->
      <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight"
        aria-controls="offcanvasRight" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Desktop Navigation -->
      <div class="collapse navbar-collapse mt-2 justify-content-end">
        <ul class="navbar-nav mx-4 justify-content-around gap-5 mt-2">
          <li class="nav-item">
            <a class="nav-link {% if url_name == 'index' %}active
            {% endif %}" 
               aria-current="page" href="{% url 'index' %}">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if url_name == 'about' %}active{% endif %}" 
               href="{% url 'about' %}">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if url_name == 'projects' %}active{% endif %}" 
               href="{% url 'projects' %}">Projects</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if url_name == 'contact' %}active{% endif %}" 
               href="{% url 'contact' %}">Contact</a>
          </li>
        </ul>

        <!-- Theme Toggle Switch -->
        <div class="form-check form-switch mt-3 mx-2" id="btnSwitch-main">
          <input class="form-check-input toggle-btn" type="checkbox" role="switch" id="switchCheckDefault">
          <label class="form-check-label fs-5" for="switchCheckDefault">
          </label>
        </div>
      </div>
    </nav>
    
    <!-- Offcanvas Menu -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
      <div class="offcanvas-header">
        <h2 class="offcanvas-title fs-4" id="offcanvasRightLabel">Rashidat Adekoya | Portfolio</h2>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      
      <div class="offcanvas-body">
        <!-- Mobile Navigation -->
        <ul class="navbar-nav flex-column mb-4">
          <li class="nav-item mb-2">
            <a class="nav-link {% if url_name == 'index' %}active{% endif %}" 
               aria-current="page" href="{% url 'index' %}">Home</a>
          </li>
          <li class="nav-item mb-2">
            <a class="nav-link {% if url_name == 'about' %}active{% endif %}" 
               href="{% url 'about' %}">About</a>
          </li>
          <li class="nav-item mb-2">
            <a class="nav-link {% if url_name == 'projects' %}active{% endif %}" 
               href="{% url 'projects' %}">Projects</a>
          </li>
          <li class="nav-item mb-2">
            <a class="nav-link {% if url_name == 'contact' %}active{% endif %}" 
               href="{% url 'contact' %}">Contact</a>
          </li>
        </ul>

        <!-- Theme Toggle Switch -->
        <div class="form-check form-switch mt-auto" id="btnSwitch-canvas">
          <input class="form-check-input toggle-btn" type="checkbox" role="switch" id="switchCheckDefault1">
          <label class="form-check-label fs-5" for="switchCheckDefault1">
          </label>
        </div>
      </div> 
    </div>

    <!-- Messages -->
    <div class="container mt-3">
      <div class="row">
        <div class="col-md-8 offset-md-2">
          {% for message in messages %}
          <div class="alert alert-info {{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message|safe }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
  {% endwith %}
</header>